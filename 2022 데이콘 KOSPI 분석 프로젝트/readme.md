# 🏆 2022 데이콘 KOSPI 분석 및 시각화 프로젝트  

## .rolling window를 사용한 KOSPI 지수 시각화 및 예측 (Plotly, fbprophet)  


📈 2022.09.01 ~ 2022.10.04  

📈 위 기간에 데이콘에서 진행된 KOSPI 분석 및 시각화 대회에 참여한 기록입니다.  

📈 Series Data를 다뤄본 경험은 있지만 시계열 데이터와 금융 데이터는 이번 기회에 처음으로 다뤄보았습니다. 때문에 수상 목적 보다는 다양한 데이터를 사용해서 프로젝트를 진행하는 경험을 쌓아보기 위해 참가했습니다. 본 공모전에 제출한 프로젝트 레포트 정성평가 결과 총 15개 팀 중에서 8등을 차지했으며, 총 5개 팀에 주어지는 수상에는 성공하지 못했습니다. 하지만 앞서 말했듯이 여러 데이터를 다뤄보는 경험에 의의를 두었기 때문에 향후 시계열 분석과 금융 데이터 분석에 사용할 수 있는 방법들을 배운 것에 상당히 만족합니다!!  

📈 제가 제출한 코드는 아래 두 링크를 통해 확인하실 수 있습니다.<br>  

[💡2022 데이콘 KOSPI 분석 공모전 프로젝트 제출본](https://dacon.io/competitions/official/235980/codeshare/6557?page=1&dtype=random)<br>  

[💡2022 데이콘 KOSPI 분석 공모전 프로젝트 - plotly chart board](https://chart-studio.plotly.com/~nyamin9/69)

<br>  

## 🏆 이론적 배경  

- 주가를 예상하는 데 중요한 수치중 하나로 이동평균선(moving average)이 있습니다. 이는 (당일-x일)~(당일) 까지의 주가의 평균을 이은 선입니다.  
- 주로 5일, 10일, 20일, 60일, 120일 이평선을 사용하며, 20일 이평선까지는 단기, 60일까지는 중기, 120일 초과 이평선은 장기 이평선으로 구분하는 경우가 많습니다.  
- 이동평균선의 움직임으로 주가를 예측하기 위해서는 단기이동평균선과 장기이동평균선을 비교해야 합니다.  
  - 투자론에서 단기이동평균선이 장기이동평균선보다 위에 있는 경우(정배열), 그 겹쳐서 올라가기 시작하는 점을 골든크로스라고 합니다. 이때 주가가 오를 것이라 예측합니다.  
  - 반면 단기이동평균선이 장기이동평균선보다 밑에 있는 경우(역배열), 겹쳐서 내려가기 시작하는 점을 데드크로스라고 합니다. 이때 주가가 하락할 것이라 예측합니다.  
- 이러한 이론적 배경을 토대로 단기이평선과 장기이평선을 비교하거나, 실제 주가를 비교하여 미래의 주가를 예측할 것입니다.  
  
<br>  

## 🏆 사용한 데이터  

📈 사용한 데이터는 데이콘 측에서 제공하는 KOSPI 수집 코드를 사용해서 얻었습니다. 데이터는 다음과 같은 column으로 이루어집니다.  

- Date : 날짜  
- Close : 종가  
- Open : 시가  
- High : 고가  
- Low	: 저가  
- Volume : 거래량  
- Change : 변동률  

<br>  

## 🏆 사용한 모듈 및 라이브러리  
 

📈 저는 plotly 라이브러리를 사용해서 다양한 이동평균선을 시각화해보고 candel stick chart를 만들어보았습니다.  

📈 다음으로 위의 과정을 통해 추출한 열을 바탕으로 이후의 KOSPI 가격을 예측하기 위해서 fbprophet 모듈을 사용하였습니다.  

📈 fbprophet 모듈은 사용에 필요한 환경변수 세팅이 복잡했습니다. 아무리 설정해도 바뀌지 않아서 코랩에서 실행한 기억이 납니다.  

<br>  

## 🏆 분석 결과  

- 이렇게 plotly를 통해 시각화해보고, fbprophet을 통해서 향후 15일 간의 코스피지수도 예측해봤습니다.  

- 이동평균선들을 사용해서 시각화해본 결과 아직 장기이동평균선과 단기이동평균선 사이의 차이가 커서 쉽게 코스피지수가 반등하기는 힘들어 보이는 것이 사실입니다. 하지만 이렇게 숫자로만 하는 시각화 예측과 달리 주가는 얽혀있는 상황이 참 많습니다. 데이터로는 표현할 수 없는 국제 정세와 사람들의 소비 심리 하나하나가 주가에 정말 많은 영향을 미치기 때문에, 이런 시각화 모델 하나만 보고 주가가 오르지 않을거야!! 라고 생각하실 필요는 전혀 없습니다. 숫자가 항상 참을 말하는 건 아니니까요.  

- fbprophet 모듈을 사용해서 진행한 예측은 3년간의 데이터와 2022년의 데이터를 사용했을 때 서로 생각보다 큰 차이를 보여주었습니다. 코스피 지수가 한창 최고점을 찍고 있었을 때의 데이터를 학습한 것과, 계속 떨어지고 있는 데이터를 학습한 것이 차이를 만든 가장 큰 이유가 아닐까 생각합니다. 전체적으로 호황일 때의 데이터를 학습하면 아무래도 모델 자체가 높은 수치에는 적은 가중치를 두고, 낮은 수치에는 높은 가중치를 둘테니 지속적으로 떨어지는 중인 2022년도의 낮은 수치에 민감하게 반응하는 것이죠. 2022년도의 데이터를 학습한 경우는 정반대라고 생각하면 되실 것 같습니다!!  

- 하지만 말했듯이 수치가 항상 모든 것을 말해주는 것은 아닙니다. 심지어 코스피지수는 우리나라 기업의 대부분의 정보를 담고 있으니, 세세한 움직임에 반응하기는 더 어려울 수 있지 않을까 싶습니다. 처음 해본 시계열 분석이라 많이 부족할 것 같습니다. 앞으로 더 많은 분석을 통해 발전해나가고 싶습니다. 미흡한 글 읽어주셔서 갑사합니다.  

<br>  

## 🏆 대회 인증서  

<p align="center"><img src="https://github.com/nyamin9/Data-Mining/files/10072848/455684_D000022110701.pdf" width="1000" /></p><br>  
